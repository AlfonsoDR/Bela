<script src="js/p5.min.js"></script>
<script src="js/p5.dom.min.js"></script>

<script src="/gui/js/gui-slider.js"></script>
<script src="/gui/js/gui-select.js"></script>


<script src="/gui/js/bela-gui-data-handler.js"></script>
<script src="/gui/js/bela-gui-control-handler.js"></script>

<script>
    let defaultSketch = "p5-standard-gui";
    let sketchName = location.hash;
    sketchName = sketchName.substring(1);
    if(sketchName.length == 0) {
        // Load default sketch
        sketchName = defaultSketch;
    }
    let p5sketchSource = "/gui/p5-sketches/"+sketchName+".js"
    let scriptElement;

    let loadSketch = loadScript(p5sketchSource);
    loadSketch.then((resolved) => {
        scriptElement = resolved;
        console.log(p5sketchSource+ " loaded");

        let obj = {
			event: "gui-ready"
		};
		obj = JSON.stringify(obj);
		if (Bela_control.ws.readyState === 1)
			Bela_control.ws.send(obj);

    }).catch((rejected) => {
        console.log(p5sketchSource + " couldn't be loaded.")
        console.log("Loading %s instead", p5sketchSource);
        p5sketchSource = "/gui/p5-sketches/"+defaultSketch+".js"
        scriptElement = loadScript(p5sketchSource);
    })
</script>
