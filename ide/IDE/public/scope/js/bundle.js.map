{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/events/events.js","scope-src/BackgroundView.js","scope-src/ChannelView.js","scope-src/ControlView.js","scope-src/Model.js","scope-src/View.js","scope-src/main.js","scope-src/scope-browser.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","file":"bundle.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","'use strict';\nvar View = require('./View');\n\nclass BackgroundView extends View{\n\n\tconstructor(className, models){\n\t\tsuper(className, models);\n\t\tvar saveCanvas =  document.getElementById('saveCanvas');\n\t\tthis.canvas = document.getElementById('scopeBG');\n\t\tsaveCanvas.addEventListener('click', () => {\n\t\t\tthis.canvas.getContext('2d').drawImage(document.getElementById('scope'), 0, 0);\n\t\t\tsaveCanvas.href = this.canvas.toDataURL();\n\t\t\tthis.repaintBG();\n\t\t});\n\t}\n\t\n\trepaintBG(xTime, data){\n\t\tvar canvas = this.canvas;\n\t\tcanvas.width = window.innerWidth;\n\t\tcanvas.height = window.innerHeight;\n\t\tvar ctx = canvas.getContext('2d');\n\t\tctx.rect(0, 0, canvas.width, canvas.height);\n\t\tctx.fillStyle=\"white\";\n\t\tctx.fill();\n\t\t//ctx.clearRect(0, 0, canvas.width, canvas.height);\n\t\t\n\t\tvar xPixels = xTime*this.models[0].getKey('sampleRate').value/1000;\n\t\tvar numVLines = Math.floor(canvas.width/xPixels);\n\n\t\t//faint lines\n\t\tctx.strokeStyle = '#000000';\n\t\tctx.lineWidth = 0.2;\n\t\tctx.setLineDash([]);\n\t\tctx.beginPath();\n\t\tfor (var i=1; i<numVLines; i++){\n\t\t\tctx.moveTo(canvas.width/2 + i*xPixels, 0);\n\t\t\tctx.lineTo(canvas.width/2 + i*xPixels, canvas.height);\n\t\t\tctx.moveTo(canvas.width/2 - i*xPixels, 0);\n\t\t\tctx.lineTo(canvas.width/2 - i*xPixels, canvas.height);\n\t\t}\n\t\t\n\t\tvar numHLines = 6;\n\t\tfor (var i=1; i<numHLines; i++){\n\t\t\tif (i != numHLines/2){\n\t\t\t\tctx.moveTo(0, canvas.height*i/numHLines);\n\t\t\t\tctx.lineTo(canvas.width, canvas.height*i/numHLines);\n\t\t\t}\n\t\t}\n\t\t\n\t\t//ticks\n\t\tvar numTicks = 10;\n\t\tvar tickSize;\n\t\tfor (var i=0; i<numVLines; i++){\n\t\t\tfor (var j=1; j<numTicks; j++){\n\t\t\t\ttickSize = 7;\n\t\t\t\tif (j === Math.floor(numTicks/2)){\n\t\t\t\t\ttickSize = 10;\n\t\t\t\t}\n\t\t\t\tctx.moveTo(canvas.width/2 + i*xPixels + xPixels*j/numTicks, canvas.height/2 + tickSize);\n\t\t\t\tctx.lineTo(canvas.width/2 + i*xPixels + xPixels*j/numTicks, canvas.height/2 - tickSize);\n\t\t\t\tif (i){\n\t\t\t\t\tctx.moveTo(canvas.width/2 - i*xPixels + xPixels*j/numTicks, canvas.height/2 + tickSize);\n\t\t\t\t\tctx.lineTo(canvas.width/2 - i*xPixels + xPixels*j/numTicks, canvas.height/2 - tickSize);\n\t\t\t\t}\n\t\t\t}\n\t\t}\t\n\t\t\n\t\tnumTicks = 10;\n\t\tfor (var i=0; i<numHLines; i++){\n\t\t\tfor (var j=1; j<numTicks; j++){\n\t\t\t\ttickSize = 7;\n\t\t\t\tif (j === Math.floor(numTicks/2)){\n\t\t\t\t\ttickSize = 10;\n\t\t\t\t}\n\t\t\t\tctx.moveTo(canvas.width/2 - tickSize, canvas.height*i/numHLines + canvas.height*j/(numTicks*numHLines));\n\t\t\t\tctx.lineTo(canvas.width/2 + tickSize, canvas.height*i/numHLines + canvas.height*j/(numTicks*numHLines));\n\t\t\t}\n\t\t}\t\n\t\tctx.stroke();\n\t\t\n\t\t//dashed lines\n\t\tctx.beginPath();\n\t\tctx.setLineDash([2, 5]);\n\t\t\n\t\tctx.moveTo(0, canvas.height*3/4);\n\t\tctx.lineTo(canvas.width, canvas.height*3/4);\n\t\tctx.moveTo(0, canvas.height*1/4);\n\t\tctx.lineTo(canvas.width, canvas.height*1/4);\n\t\t\n\t\tctx.stroke();\t\n\t\tctx.setLineDash([]);\t\n\t\t\n\t\t//fat lines\n\t\tctx.lineWidth = 1;\n\t\tctx.beginPath();\n\t\tvar numVLines = 2;\n\t\tfor (var i=0; i<=numVLines; i++){\n\t\t\tctx.moveTo(canvas.width*i/numVLines, 0);\n\t\t\tctx.lineTo(canvas.width*i/numVLines, canvas.height);\n\t\t}\n\t\t\n\t\tvar numHLines = 2;\n\t\tfor (var i=0; i<=numHLines; i++){\n\t\t\tctx.moveTo(0, canvas.height*i/numHLines);\n\t\t\tctx.lineTo(canvas.width, canvas.height*i/numHLines);\n\t\t}\n\t\tctx.stroke();\n\t\t\n\t\t//trigger line\n\t\t/*ctx.strokeStyle = '#0000ff';\n\t\tctx.lineWidth = 0.2;\n\t\tctx.beginPath();\n\t\tctx.moveTo(0, (canvas.height/2)*(1-(this.yOffset+this.triggerLevel)/this.yAmplitude) );\n\t\tctx.lineTo(canvas.width, (canvas.height/2)*(1-(this.yOffset+this.triggerLevel)/this.yAmplitude) );\n\t\tctx.stroke();*/\n\t}\n\t\n\t__xTimeBase(value, data){\n\t\t//console.log(value);\n\t\tthis.repaintBG(value, data);\n\t}\n\t\n}\n\nmodule.exports = BackgroundView;\n","'use strict';\nvar View = require('./View');\n\nfunction ChannelConfig(){\n\tthis.yAmplitude = 1;\n\tthis.yOffset = 0;\n\tthis.color = '#ff0000';\n}\n\nvar channelConfig = [new ChannelConfig()];\nvar colours = ['#ff0000', '#0000ff', '#00ff00', '#ffff00', '#00ffff', '#ff00ff'];\n\nclass ChannelView extends View{\n\n\tconstructor(className, models){\n\t\tsuper(className, models);\n\t}\n\t\n\t// UI events\n\tinputChanged($element, e){\n\t\tvar key = $element.data().key;\n\t\tvar channel = $element.data().channel;\n\t\tvar value = (key === 'color') ? $element.val() : parseFloat($element.val());\n\t\tif (isNaN(value)) return;\n\t\tthis.$elements.filterByData('key', key).filterByData('channel', channel).val(value);\n\t\tchannelConfig[channel][key] = value;\n\t\tthis.emit('channelConfig', channelConfig);\n\t}\n\t\n\t_numChannels(val){\n\t\tvar numChannels = val.value;\n\t\tif (numChannels < channelConfig.length){\n\t\t\twhile(numChannels < channelConfig.length){\n\t\t\t\t$('#channelViewChannel'+(channelConfig.length-1)).remove();\n\t\t\t\tchannelConfig.pop();\n\t\t\t}\n\t\t} else if (numChannels > channelConfig.length){\n\t\t\twhile(numChannels > channelConfig.length){\n\t\t\t\tchannelConfig.push(new ChannelConfig());\n\t\t\t\tchannelConfig[channelConfig.length-1].color = colours[(channelConfig.length-1)%colours.length];\n\t\t\t\tvar el = $('#channelViewChannel0')\n\t\t\t\t\t.clone(true)\n\t\t\t\t\t.prop('id', 'channelViewChannel'+(channelConfig.length-1))\n\t\t\t\t\t.appendTo($(this.$parents[0]));\n\t\t\t\tel.find('h1').html('Channel '+(channelConfig.length-1));\n\t\t\t\tel.find('input').each(function(){\n\t\t\t\t\t$(this).data('channel', channelConfig.length-1)\n\t\t\t\t});\n\t\t\t\tel.find('input[type=color]').val(colours[(channelConfig.length-1)%colours.length]);\n\t\t\t}\n\t\t}\n\t\tthis.emit('channelConfig', channelConfig);\n\t\tthis.$elements = $('.'+this.className);\n\t}\n\t\n}\n\nmodule.exports = ChannelView;\n\n$.fn.filterByData = function(prop, val) {\n    return this.filter(\n        function() { return $(this).data(prop)==val; }\n    );\n}","'use strict';\nvar View = require('./View');\n\nclass ControlView extends View{\n\n\tconstructor(className, models){\n\t\tsuper(className, models);\n\t\t$('#controlsButton').click(() => this.$parents.toggleClass('hidden') );\n\t}\n\t\n\t// UI events\n\tselectChanged($element, e){\n\t\tthis.emit('settings-event', $element.data().key, $element.val());\n\t}\n\tinputChanged($element, e){\n\t\tvar key = $element.data().key;\n\t\tvar value = $element.val();\n\t\tthis.emit('settings-event', key, value);\n\t\tthis.$elements.filterByData('key', key).val(value);\n\t}\n\tbuttonClicked($element, e){\n\t\tthis.emit('settings-event', $element.data().key);\n\t}\n\t\n\t// settings model events\n\tmodelChanged(data, changedKeys){\n\t\tfor (let key of changedKeys){\n\t\t\tif (key === 'upSampling' || key === 'downSampling' || key === 'xTimeBase'){\n\t\t\t\tthis['_'+key](data[key], data);\n\t\t\t} else {\n\t\t\t\tthis.$elements.filterByData('key', key).val(data[key].value);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_upSampling(value, data){\n\t\t$('.xTime-display').html((data.xTimeBase * data.downSampling.value/data.upSampling.value).toPrecision(2));\n\t}\n\t_downSampling(value, data){\n\t\t$('.xTime-display').html((data.xTimeBase * data.downSampling.value/data.upSampling.value).toPrecision(2));\n\t}\n\t_xTimeBase(value, data){\n\t\t$('.xTime-display').html((data.xTimeBase * data.downSampling.value/data.upSampling.value).toPrecision(2));\n\t}\n\t\n\t__numChannels(val, data){\n\t\tvar el = this.$elements.filterByData('key', 'triggerChannel');\n\t\tel.empty();\n\t\tfor (let i=0; i<val.value; i++){\n\t\t\tlet opt = $('<option></option>').html(i).val(i).appendTo(el);\n\t\t\tif (i === data.triggerChannel.value) opt.prop('selected', 'selected'); \n\t\t}\n\t}\n\t\n}\n\nmodule.exports = ControlView;\n\n$.fn.filterByData = function(prop, val) {\n    return this.filter(\n        function() { return $(this).data(prop)==val; }\n    );\n}","var EventEmitter = require('events').EventEmitter;\n\nclass Model extends EventEmitter{\n\n\tconstructor(data){\n\t\tsuper();\n\t\tvar _data = data || {};\n\t\tthis._getData = () => _data;\n\t}\n\t\n\tgetKey(key){\n\t\treturn this._getData()[key];\n\t}\n\t\n\tsetData(newData){\n\t\tif (!newData) return;\n\t\tvar newKeys = [];\n\t\tfor (let key in newData){\n\t\t\tif (!_equals(newData[key], this._getData()[key], false)){\n\t\t\t\tnewKeys.push(key);\n\t\t\t\tthis._getData()[key] = newData[key];\n\t\t\t}\n\t\t}\n\t\tif (newKeys.length) {\n\t\t\t//console.log('changed setdata');\n\t\t\tthis.emit('change', this._getData(), newKeys);\n\t\t}\n\t\tthis.emit('set', this._getData(), Object.keys(newData));\n\t}\n\t\n\tsetKey(key, value){\n\t\tif (!_equals(value, this._getData()[key], false)){\n\t\t\tthis._getData()[key] = value;\n\t\t\t//console.log('changed setkey');\n\t\t\tthis.emit('change', this._getData(), [key]);\n\t\t}\n\t\tthis.emit('set', this._getData(), [key]);\n\t}\n\t\n\tpushIntoKey(key, value){\n\t\tthis._getData()[key].push(value);\n\t\tthis.emit('change', this._getData(), [key]);\n\t\tthis.emit('set', this._getData(), [key]);\n\t}\n\t\n\tspliceFromKey(key, index){\n\t\tthis._getData()[key].splice(index, 1);\n\t\tthis.emit('change', this._getData(), [key]);\n\t\tthis.emit('set', this._getData(), [key]);\n\t}\n\t\n\tprint(){\n\t\tconsole.log(this._getData());\n\t}\n\t\n}\n\nmodule.exports = Model;\n\nfunction _equals(a, b, log){\n\tif (log) console.log('a:', a, 'b:', b);\n\tif (a instanceof Array && b instanceof Array){\n\t\tif (log) console.log('arrays', 'a:', a, 'b:', b, (a.length === b.length), a.every( function(element, index){ return _equals(element, b[index], log) }));\n\t\treturn ( (a.length === b.length) && a.every( function(element, index){ return _equals(element, b[index], log) }) );\n\t} else if (a instanceof Object && b instanceof Object){\n\t\tif (log) console.log('objects', 'a:', a, 'b:', b);\n\t\tfor (let c in a){ \n\t\t\tif (log) console.log('a[c]:', a[c], 'b[c]:', b[c], 'c:', c);\n\t\t\tif (!_equals(a[c], b[c], log)) return false;\n\t\t}\n\t\treturn true;\n\t} else {\n\t\tif (log) console.log('a:', a, 'b:', b, Object.is(a, b), (a === b));\n\t\treturn Object.is(a, b);\n\t}\n}\n\t\n\t\n\t\n\t\n\t\n\t\n\t","var EventEmitter = require('events').EventEmitter;\n\nclass View extends EventEmitter{\n\n\tconstructor(CSSClassName, models, settings){\n\t\tsuper();\n\t\tthis.className = CSSClassName;\n\t\tthis.models = models;\n\t\tthis.settings = settings;\n\t\tthis.$elements = $('.'+CSSClassName);\n\t\tthis.$parents = $('.'+CSSClassName+'-parent');\n\t\t\n\t\tif (models){\n\t\t\tfor (var i=0; i<models.length; i++){\n\t\t\t\tmodels[i].on('change', (data, changedKeys) => {\n\t\t\t\t\tthis.modelChanged(data, changedKeys);\n\t\t\t\t});\n\t\t\t\tmodels[i].on('set', (data, changedKeys) => {\n\t\t\t\t\tthis.modelSet(data, changedKeys);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.$elements.filter('select').on('change', (e) => this.selectChanged($(e.currentTarget), e));\n\t\tthis.$elements.filter('input').on('input', (e) => this.inputChanged($(e.currentTarget), e));\n\t\tthis.$elements.filter('button').on('click', (e) => this.buttonClicked($(e.currentTarget), e));\n\t\t\n\t}\n\t\n\tmodelChanged(data, changedKeys){\n\t\tfor (let value of changedKeys){\n\t\t\tif (this['_'+value]){\n\t\t\t\tthis['_'+value](data[value], data, changedKeys);\n\t\t\t}\n\t\t}\n\t}\n\tmodelSet(data, changedKeys){\n\t\tfor (let value of changedKeys){\n\t\t\tif (this['__'+value]){\n\t\t\t\tthis['__'+value](data[value], data, changedKeys);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tselectChanged(element, e){}\n\tbuttonClicked(element, e){}\n\t\n\tprintElements(){\n\t\tconsole.log('elements:', this.$elements, 'parents:', this.$parents);\n\t}\n\t\t\n}\n\nmodule.exports = View;","var scope = require('./scope-browser');","'use strict';\n\n// worker\nvar worker = new Worker(\"js/scope-worker.js\");\n\n// models\nvar Model = require('./Model');\nvar settings = new Model();\n\n// views\nvar controlView = new (require('./ControlView'))('scopeControls', [settings]);\nvar backgroundView = new (require('./BackgroundView'))('scopeBG', [settings]);\nvar channelView = new (require('./ChannelView'))('channelView', [settings]);\n\n// socket\nvar socket = io('/BelaScope');\n\n// view events\ncontrolView.on('settings-event', (key, value) => {\n\tsocket.emit('settings-event', key, value);\n});\nchannelView.on('channelConfig', (channelConfig) => {\n\tworker.postMessage({\n\t\tevent\t\t\t: 'channelConfig',\n\t\tchannelConfig\n\t});\n});\n\n// socket events\nsocket.on('settings', (newSettings) => {\n\tif (newSettings.frameWidth) newSettings.frameWidth.value = window.innerWidth;\n\tnewSettings.frameHeight = window.innerHeight;\n\tsettings.setData(newSettings);\n\t//console.log(newSettings);\n\t//settings.print();\n});\n\n// model events\nsettings.on('set', (data, changedKeys) => {\n\tif (changedKeys.indexOf('frameWidth') !== -1){\n\t\tvar xTimeBase = Math.max(Math.floor(1000*(data.frameWidth.value/8)/data.sampleRate.value), 1);\n\t\tsettings.setKey('xTimeBase', xTimeBase);\n\t\tsocket.emit('settings-event', 'frameWidth', data.frameWidth.value)\n\t} else {\n\t\tworker.postMessage({\n\t\t\tevent\t\t: 'settings',\n\t\t\tsettings\t: data\n\t\t});\n\t}\n});\n\n// window events\n$(window).on('resize', () => {\n\tsettings.setKey('frameWidth', {type: 'integer', value: window.innerWidth});\n\tsettings.setKey('frameHeight', window.innerHeight);\n});\n\n// plotting\n{\n\t\n\tlet canvas = document.getElementById('scope');\n\tlet ctx = canvas.getContext('2d');\n\tctx.lineWidth = 2;\n\t\n\tlet width, height, numChannels, channelConfig = [];\n\tsettings.on('change', (data, changedKeys) => {\n\t\tif (changedKeys.indexOf('frameWidth') !== -1 || changedKeys.indexOf('frameHeight') !== -1){\n\t\t\tcanvas.width = window.innerWidth;\n\t\t\twidth = canvas.width;\n\t\t\tcanvas.height = window.innerHeight;\n\t\t\theight = canvas.height;\n\t\t}\n\t\tif (changedKeys.indexOf('numChannels') !== -1){\n\t\t\tnumChannels = data.numChannels.value;\n\t\t}\n\t});\n\tchannelView.on('channelConfig', (config) => channelConfig = config );\n\t\n\tlet frame, length, plot = false;\n\n\tworker.onmessage = function(e) {\n\t\tframe = e.data;\n\t\tlength = Math.floor(frame.length/numChannels);\n\t\tplot = true; \n\t};\n\t\n\tfunction plotLoop(){\n\t\trequestAnimationFrame(plotLoop);\n\t\t\n\t\tif (plot){\n\t\t\n\t\t\tplot = false;\n\t\t\tctx.clearRect(0, 0, width, height);\n\t\t\t//console.log('plotting');\n\t\t\t\n\t\t\tfor (var i=0; i<numChannels; i++){\n\n\t\t\t\tctx.strokeStyle = channelConfig[i].color;\n\t\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(0, frame[i*length]);\t\n\t\t\t\t\n\t\t\t\tfor (var j=1; j<length; j++){\n\t\t\t\t\tctx.lineTo(j, frame[j+i*length]);\n\t\t\t\t}\n\t\n\t\t\t\tctx.stroke();\n\t\t\n\t\t\t}\n\t\t\n\t\t} /*else {\n\t\t\tconsole.log('not plotting');\n\t\t}*/\n\t}\n\tplotLoop();\n\t\n\tlet saveCanvasData =  document.getElementById('saveCanvasData');\t\t\n\tsaveCanvasData.addEventListener('click', function(){\n\n\t\tlet downSampling = settings.getKey('downSampling').value;\n\t\tlet upSampling = settings.getKey('upSampling').value;\n\t\tlet sampleRate = settings.getKey('sampleRate').value;\n\t\t\n\t\tlet out = \"data:text/csv;charset=utf-8,\";\n\t\t\n\t\tfor (let i=0; i<length; i++){\n\t\t\tout += i*downSampling/(upSampling * sampleRate);\n\t\t\tfor (let j=0; j<numChannels; j++){\n\t\t\t\tout += ','+ ( ( 1 - frame[j*length + i] / (height/2) ) * channelConfig[j].yAmplitude - channelConfig[j].yOffset );\n\t\t\t}\n\t\t\tout += '\\n';\n\t\t}\n\n\t\tthis.href = encodeURI(out);\n\t});\n\t\n}\n\n\n\n\n\n\n\n\n\n"]}